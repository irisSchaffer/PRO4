{% extends '::base.html.twig' %}

{% block content %}
	<h1>Users in {{ department.name }}</h1>
	<div id="users">
	
	{% if isAdmin is not defined or isAdmin %}
		<form method="post">
			<fieldset>
				<legend>Add new User to Department</legend>
				<ul>
					<li>{{ form_row(form.users) }}</li>
				</ul>
				{{ form_widget(form) }}
			
				<button type="submit">Add User</button>
			</fieldset>
		</form>
	{% endif %}
	
	<h3>Users</h3>
	
	{% if users is empty %}
		No Users added to this department yet. Please add users or ask your administrator to do so.
	{% endif %}
	
	{% for user in users %}
		<div>
			{{ user.eMail }}
			
        	{% if isAdmin %}
	        	{% if user.userId != app.user.userId %}
	        		<a href="{{ path("remove_department", {"projectId" : project.projectId, "departmentId" : department.departmentId}) }}">remove</a>
	        		| <a href="{{ path("edit_department", {"projectId" : project.projectId, "departmentId" : department.departmentId}) }}">edit</a>
	        	{% endif %}
			{% endif %}
			
		<div>
	{% endfor %}
	</div>
		
{% endblock %}